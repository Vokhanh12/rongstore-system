{"level":"warn","ts":"2025-11-20T14:02:12.225+0700","caller":"logger/logger.go:211","msg":"business error","service":"May-tinh-xach-tay-cua-Nguyen.local","event.type":"business_error","event.action":"business_failure","error.code":"AUTH-VAL-002","error.message":"Invalid email format","error.severity":"S3","error.retryable":false,"trace_id":"abc123","request_id":"request123","session_id":"5b2fbdfa-3713-44f1-b973-c5e82c6115f6","instance":"May-tinh-xach-tay-cua-Nguyen.local","env":"unknown","handler":"Login","request":"email:\"vokhanh12\""}
{"level":"info","ts":"2025-11-20T14:02:12.226+0700","caller":"logger/logger.go:169","msg":"access log","service":"iam_service","handler":"Login","method":"/iam.v1.IamService/Login","status":"OK","latency_ms":0,"http_status":0,"ip":"127.0.0.1:60177","user_agent":"","event.type":"access","event.action":"request_handled","trace_id":"abc123","request_id":"request123","session_id":"5b2fbdfa-3713-44f1-b973-c5e82c6115f6","instance":"May-tinh-xach-tay-cua-Nguyen.local","env":"unknown","trace_id":"abc123"}
{"level":"info","ts":"2025-11-20T14:02:52.705+0700","caller":"logger/logger.go:186","msg":"Configuration loaded successfully","service":"iam_service","event.type":"audit","event.action":"config_loaded","trace_id":"","request_id":"","instance":"May-tinh-xach-tay-cua-Nguyen.local","env":"unknown","keycloak_url":"http://100.114.31.30:9090"}
{"level":"info","ts":"2025-11-20T14:02:52.705+0700","caller":"logger/logger.go:169","msg":"access log","service":"iam_service","handler":"KeycloakCheck","method":"GET","status":"checking","latency_ms":0,"http_status":0,"ip":"","user_agent":"","event.type":"access","event.action":"request_handled","trace_id":"","request_id":"","instance":"May-tinh-xach-tay-cua-Nguyen.local","env":"unknown","url":"http://100.114.31.30:9090"}
{"level":"info","ts":"2025-11-20T14:02:52.705+0700","caller":"logger/logger.go:186","msg":"Prometheus metrics endpoint started","service":"iam_service","event.type":"audit","event.action":"metrics_server_start","trace_id":"","request_id":"","instance":"May-tinh-xach-tay-cua-Nguyen.local","env":"unknown","addr":":9090"}
{"level":"error","ts":"2025-11-20T14:03:23.524+0700","caller":"logger/logger.go:226","msg":"infrastructure error","service":"May-tinh-xach-tay-cua-Nguyen.local","event.type":"infra_error","event.action":"infra_failure","error.code":"AUTH-VAL-999","error.message":"Unknown domain error","error.severity":"S1","error.retryable":false,"error.stack":"","trace_id":"","request_id":"","instance":"May-tinh-xach-tay-cua-Nguyen.local","env":"unknown","stack":"server/pkg/logger.LogInfraError\n\t/Users/vokhanh12/Development/rongstore-system/server/pkg/logger/logger.go:226\nmain.main\n\t/Users/vokhanh12/Development/rongstore-system/server/cmd/server/main.go:83\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:283"}
{"level":"fatal","ts":"2025-11-20T14:03:23.525+0700","caller":"server/main.go:85","msg":"Keycloak is not ready","error":"Keycloak not ready after 10 retries","stack":"main.main\n\t/Users/vokhanh12/Development/rongstore-system/server/cmd/server/main.go:85\nruntime.main\n\t/usr/local/go/src/runtime/proc.go:283"}
